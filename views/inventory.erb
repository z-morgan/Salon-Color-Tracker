<div class="tools">
  <form action="/inventories/<%= @inv_name %>" method="get" class="sort">
      <label>Sort inventory: </label>
      <select name="attribute">
        <option value="depth" <%== 'selected' if @attribute == "depth" %>>Depth</option>
        <option value="tone" <%== 'selected' if @attribute == "tone" %>>Tone</option>
      </select>
      <select name="order">
        <option value="ascending" <%== 'selected' if @order == "ascending" %>>Low to High</option>
        <option value="descending" <%== 'selected' if @order == "descending" %>>High to Low</option>
      </select>
      <input type="submit" value="Sort">
  </form>

  <div class="new-items">
    <label for="add-item">Received new product?</label>
    <a href="/inventories/<%= @inv_name %>/add" id="add-item">Add items here!</a>
  </div>

  <div class="new-line">
    <a href="/inventories/<%= @inv_name %>/new-line">Add a new color line</a>
  </div>
</div>

<div class="inv-page-nav">
  <% if @inv_page > 1 %>
    <a href="/inventories/<%= @inv_name %>?inv_page=<%= @inv_page - 1 %>" class="page-button">
      <<< Prev Color Line</a>
  <% end %>

  <% if more_pages?(@inv_page, @max_inv_pages) %>
    <a href="/inventories/<%= @inv_name %>?inv_page=<%= @inv_page + 1 %>" class="page-button">
    Next Color Line >>></a>
  <% end %>
</div>

<% if @lines.empty? %>
  <p>You don't have any color lines yet. To create a new line, select "Add a new color line" in the tool bar.</p>
<% else %>
  <% @lines.each do |line| %>
    <div class="inv-table">
      <h2 class="inv-table"><%= line %></h2>
      <% if @colors.empty? %> <%# @colors.none? { |color| color.line == line } %>
        <p>You don't have any colors in this inventory yet. To import new product, select "Add items here!" in the tool bar.</p>
      <% else %>
        <table>
          <thead>
            <tr>
              <th></th>
              <th>Depth/Tone</th>
              <th>Line</th>
              <th>Count</th>
            </tr>
            <tr class="sort-indicator">
              <td></td>
              <td><%== @indicator %></td>
              <td></td>
              <td></td>
            </tr>
          </thead>
          
          <tbody>
            <% @colors.each do |color| %>
              <% if color.line == line %>
                <tr>
                  <td>
                    <form action="/inventories/<%= @inv_name %>/use" method="post">
                      <button type="submit" name="color" value="<%= color.to_s %>">Use One</button>
                    </form>
                  </td>
                  <td><%= "#{color.depth}/#{color.tone}" %></td>
                  <td><%= color.line %></td>
                  <td><%= color.count %></td>
                </tr>
              <% end %>
            <% end %>
          </tbody>
        </table>
      <% end %>
    </div>
  <% end %>
<% end %>

